<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="http://code.highcharts.com/highcharts.js"></script>
</head>
<body>
<div class="container" id="container"></div>
<script type="text/javascript">
    let chart;

    const ws = new WebSocket('ws://localhost:3000');
    ws.onopen = (event) => console.log('connection is established...');
    ws.onmessage = (event) => {
        var p = JSON.parse(event.data);
        chart.series[0].addPoint(p, true, true);
    };

    $(function () {
        var options = {
            chart: {type: 'area'},
            title: {text: 'Cyprus Views'},
            xAxis: {type: 'datetime'},
            yAxis: {title: {text: 'Count'}},
            series: [{}]
        };

        $.getJSON('http://localhost:3000/orders').then((data) => {
            options.series[0].data = data;
            chart = Highcharts.chart('container', options);
        });

    });
</script>
</body>
</html>



